document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("instagram"),e=document.getElementById("ig-track"),o=document.querySelector(".carousel-btn.prev-btn"),r=document.querySelector(".carousel-btn.next-btn"),n=document.querySelector(".carousel-dots");if(!t||!e)return;let i=!1;const s=Array.from(e.querySelectorAll(".carousel-item")),a={root:null,rootMargin:"200px",threshold:.1},l=()=>{if(i)return;i=!0,e.querySelectorAll(".ig-placeholder").forEach(t=>{const e=t.getAttribute("data-instgrm-permalink"),o=t.getAttribute("data-instgrm-version");if(e){const r=document.createElement("blockquote");r.className="instagram-media",r.setAttribute("data-instgrm-permalink",e),r.setAttribute("data-instgrm-version",o||"14"),r.style.cssText="background:#FFF;border:0;border-radius:3px;box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15);margin:1px;max-width:540px;min-width:326px;padding:0;width:calc(100% - 2px)";for(;t.firstChild;)r.appendChild(t.firstChild);t.parentNode.replaceChild(r,t)}});const t=document.createElement("script");t.src="https://www.instagram.com/embed.js",t.async=!0,document.body.appendChild(t),window.instgrm&&window.instgrm.Embeds.process()},c=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&(l(),e.disconnect())})},a);c.observe(t),n&&s.length>0&&s.forEach((t,e)=>{const o=document.createElement("button");o.type="button",o.className=0===e?"dot active":"dot",o.setAttribute("role","tab"),o.setAttribute("aria-selected",0===e?"true":"false"),o.setAttribute("aria-controls","ig-track"),o.setAttribute("aria-label",`עבור לפריט ${e+1}`),o.setAttribute("tabindex",0===e?"0":"-1"),o.addEventListener("click",()=>{m(e)}),n.appendChild(o)});const d=Array.from(document.querySelectorAll(".dot"));let u=0;const g=t=>{d.forEach((e,o)=>{const r=o===t;e.classList.toggle("active",r),e.setAttribute("aria-selected",r?"true":"false"),e.setAttribute("tabindex",r?"0":"-1")})},m=t=>{s[t]&&(s[t].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),u=t,g(u))};o&&o.addEventListener("click",()=>{u>0?m(u-1):m(s.length-1)}),r&&r.addEventListener("click",()=>{u<s.length-1?m(u+1):m(0)});let p;e.addEventListener("scroll",()=>{clearTimeout(p),p=setTimeout(()=>{const t=e.getBoundingClientRect(),o=t.left+t.width/2;let r=0,n=1/0;s.forEach((t,e)=>{const i=t.getBoundingClientRect(),s=Math.abs(o-(i.left+i.width/2));s<n&&(n=s,r=e)}),r!==u&&(u=r,g(u))},100)})});
